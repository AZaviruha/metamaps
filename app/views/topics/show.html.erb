<%#
  # @file
  # This shows a topic view. It is used.
  # The first commented out section used to be a card at the top showing all
  # info. Now we're moving towards most screens looking the same. The
  # consequence of accessing data from this view is that you can't remove
  # the topic that corresponds to the page you're on. Originally, accessing this
  # page showed the topic with its neighbours arrayed around. Now it shows the
  # same, but there's no cues to say which topic's page you're on. So when the
  # map recenters on a new topic, it's like you're on that topic's page.
  # Nice, but the URL and being unable to remove the root node still hamper that
  # experience.
  # URL: /topics/<topicid>
  #
  #%>

<div class="headertop">
  <% if authenticated? %>
    <button onclick="saveToMap();">Save to Map</button>
  <% end %>
  <button onclick='clearCanvasExceptRoot();'>Clear Canvas</button>
</div>
<div class="clearfloat"></div>

<h1 class="index">
  Viewing Topic: <%= @topic.name %>
</h1>

<div class="relatives" id="container">
  <div id="center-container">
    <div id="infovis"></div>    
  </div>
  <div class="showcard" id="showcard"></div>
</div>
<div class="clearfloat"></div>

<script>
	json = <%= @relatives %>;
	console.log(json);
	$(document).ready(function() {
		initialize("centered");
	});
</script>

<!-- <%= render :partial => 'main/find' %> -->
<%= render :partial => 'main/analyze' %>
<%= render :partial => 'main/organize' %>

<% if authenticated? %>
  <%= render :partial => 'topics/new' %>
  <%= render :partial => 'synapses/new' %>
  <%= render :partial => 'maps/new' %>
<% end %>

